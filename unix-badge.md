# Unix Badge Notes

Using the `-exec` of the `find` command you can grep for any `check` keywords
throughout the filesystem

```sh
find /home -name .bashrc -exec grep [PATTERN] {} \;
```

Where `[PATTERN]` should be replaced by the pattern you're searching for.

Searching for calls to the `passwd` will retrieve too many lines as our `grep`
will also match lines containing `/etc/passwd`. We can ask `grep` to only match
the lines **starting** with passed by using `^`:

```sh
find /home -name .bash_history -exec grep -A 1 '^passwd' {} \;
```

Administrators often use `/tmp` to leave files they want cleaned up after each
reboot. Files with `.tgz` extension are `tar` archives that have been 
compressed with the `gzip` command. Decompress the archive using the `-d` flag:

```sh
gzip -d [FILE_NAME]
```

Administrators often leave files in the `/var/tmp` directory as it does not
get cleanup up after each reboot. Files with `.tgz` extension is a tar archive
that has been compressed using `bzip`. Decompress the archive with the `-d` flag:

```sh
bzip2 -d [FILE_NAME]
```

Encryption/Decryption with `openssl` and key

```sh
# Encrypt file
openssl enc -aed256 -in [INFILE_NAME] -out [OUTFILE_NAME] -k [PASS_KEY]

# Decrypt file
openssl enc -aed256 -d -in [INFILE_NAME] -out [OUTFILE_NAME] -k [PASS_KEY]
```

If attackers get access to the `/etc/shadow` file they could use `John-the-Ripper`
password cracker to easily crack breakable hashes such as DES or MD5.

```sh
john [FILE] --format=descrypt --show
```

Other formats include `afs, md4, md5, lm, krb4, krb5, hdaa, crypt, bsdi, bf`
- If the hash starts with `$2$` or `$2a$`, Blowfish is used
- If the hash starts with `$5$`, SHA-256 is used
- If the hash starts with `$6$`, SHA-512 is used
- 

Another common service running on Linux system is mysql. On a lot of systems, 
you should be able to connect to it as root (the mysql root user) with no password:

```sh
mysql -u root
```

Navigate the `mysql` server using the following basic queries:

```mysql
show databases;
<!--+--------------------+-->
<!--| Database           |-->
<!--+--------------------+-->
<!--| information_schema |-->
<!--| mysql              |-->
<!--| pentesterlab       |-->
<!--| performance_schema |-->
<!--+--------------------+-->
use [DATABASE];
show tables;
<!--+------------------------+-->
<!--| Tables_in_pentesterlab |-->
<!--+------------------------+-->
<!--| users                  |-->
<!--+------------------------+-->
select * from [TABLE];
```